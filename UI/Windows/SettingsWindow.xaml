<Window x:Class="RevitDtools.UI.Windows.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="RevitDtools Settings" 
        Height="600" 
        Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        ShowInTaskbar="False">
    
    <Window.Resources>
        <Style TargetType="GroupBox">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="10"/>
        </Style>
        <Style TargetType="TextBox">
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Padding" Value="3"/>
        </Style>
        <Style TargetType="CheckBox">
            <Setter Property="Margin" Value="2"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Padding" Value="3"/>
        </Style>
        <Style TargetType="Button">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="MinWidth" Value="80"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Main Content -->
        <TabControl Grid.Row="0" Margin="10">
            
            <!-- Layer Mapping Tab -->
            <TabItem Header="Layer Mapping">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <GroupBox Header="Default Layer Mappings">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="200"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <TextBlock Grid.Row="0" Text="Map DWG layers to Revit line styles:" Margin="0,0,0,5"/>
                                
                                <DataGrid Grid.Row="1" 
                                         Name="LayerMappingGrid"
                                         AutoGenerateColumns="False"
                                         CanUserAddRows="True"
                                         CanUserDeleteRows="True">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="DWG Layer" Binding="{Binding Key}" Width="*"/>
                                        <DataGridTextColumn Header="Revit Line Style" Binding="{Binding Value}" Width="*"/>
                                    </DataGrid.Columns>
                                </DataGrid>
                                
                                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Button Name="AddLayerMappingButton" Content="Add Mapping" Click="AddLayerMapping_Click"/>
                                    <Button Name="RemoveLayerMappingButton" Content="Remove Selected" Click="RemoveLayerMapping_Click"/>
                                </StackPanel>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="Layer Processing Options">
                            <StackPanel>
                                <CheckBox Name="AutoSelectAllLayersCheckBox" Content="Auto-select all layers by default"/>
                                <CheckBox Name="PreserveDwgLayerNamesCheckBox" Content="Preserve DWG layer names"/>
                                
                                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                    <TextBlock Text="Default Line Style:" VerticalAlignment="Center" Width="120"/>
                                    <ComboBox Name="DefaultLineStyleComboBox" Width="200"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Ignored Layers">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="100"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <TextBlock Grid.Row="0" Text="Layers to ignore during processing:" Margin="0,0,0,5"/>
                                
                                <ListBox Grid.Row="1" Name="IgnoredLayersListBox"/>
                                
                                <StackPanel Grid.Row="2" Orientation="Horizontal">
                                    <TextBox Name="NewIgnoredLayerTextBox" Width="200"/>
                                    <Button Name="AddIgnoredLayerButton" Content="Add" Click="AddIgnoredLayer_Click"/>
                                    <Button Name="RemoveIgnoredLayerButton" Content="Remove Selected" Click="RemoveIgnoredLayer_Click"/>
                                </StackPanel>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="Layer Mapping Templates">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="100"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <TextBlock Grid.Row="0" Text="Saved layer mapping templates:" Margin="0,0,0,5"/>
                                
                                <ListBox Grid.Row="1" Name="LayerTemplatesListBox" DisplayMemberPath="Name"/>
                                
                                <StackPanel Grid.Row="2" Orientation="Horizontal">
                                    <TextBox Name="NewTemplateNameTextBox" Width="200"/>
                                    <Button Name="SaveTemplateButton" Content="Save Current" Click="SaveTemplate_Click"/>
                                    <Button Name="LoadTemplateButton" Content="Load Selected" Click="LoadTemplate_Click"/>
                                    <Button Name="DeleteTemplateButton" Content="Delete Selected" Click="DeleteTemplate_Click"/>
                                </StackPanel>
                            </Grid>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Column Creation Tab -->
            <TabItem Header="Column Creation">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <GroupBox Header="Default Column Families">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="150"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <TextBlock Grid.Row="0" Text="Available column families:" Margin="0,0,0,5"/>
                                
                                <ListBox Grid.Row="1" Name="ColumnFamiliesListBox"/>
                                
                                <StackPanel Grid.Row="2" Orientation="Horizontal">
                                    <TextBox Name="NewColumnFamilyTextBox" Width="250"/>
                                    <Button Name="AddColumnFamilyButton" Content="Add" Click="AddColumnFamily_Click"/>
                                    <Button Name="RemoveColumnFamilyButton" Content="Remove Selected" Click="RemoveColumnFamily_Click"/>
                                </StackPanel>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="Column Creation Preferences">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Preferred Family:" VerticalAlignment="Center"/>
                                <ComboBox Grid.Row="0" Grid.Column="1" Name="PreferredColumnFamilyComboBox"/>
                                
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Width Parameter:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="1" Grid.Column="1" Name="WidthParameterTextBox"/>
                                
                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Height Parameter:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="2" Grid.Column="1" Name="HeightParameterTextBox"/>
                                
                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Minimum Size (ft):" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="3" Grid.Column="1" Name="MinimumSizeTextBox"/>
                                
                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Maximum Size (ft):" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="4" Grid.Column="1" Name="MaximumSizeTextBox"/>
                                
                                <CheckBox Grid.Row="5" Grid.Column="1" Name="AutoCreateFamiliesCheckBox" Content="Auto-create families when needed"/>
                            </Grid>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Batch Processing Tab -->
            <TabItem Header="Batch Processing">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <GroupBox Header="Processing Options">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Max Concurrent Files:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="0" Grid.Column="1" Name="MaxConcurrentFilesTextBox"/>
                                
                                <CheckBox Grid.Row="1" Grid.Column="1" Name="IncludeSubfoldersCheckBox" Content="Include subfolders"/>
                                <CheckBox Grid.Row="2" Grid.Column="1" Name="ContinueOnErrorCheckBox" Content="Continue processing on errors"/>
                                <CheckBox Grid.Row="3" Grid.Column="1" Name="GenerateDetailedReportsCheckBox" Content="Generate detailed reports"/>
                                
                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Default Output Folder:" VerticalAlignment="Center"/>
                                <StackPanel Grid.Row="4" Grid.Column="1" Orientation="Horizontal">
                                    <TextBox Name="DefaultOutputFolderTextBox" Width="300"/>
                                    <Button Name="BrowseOutputFolderButton" Content="Browse..." Click="BrowseOutputFolder_Click"/>
                                </StackPanel>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="Supported File Extensions">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="100"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <TextBlock Grid.Row="0" Text="File extensions to process:" Margin="0,0,0,5"/>
                                
                                <ListBox Grid.Row="1" Name="FileExtensionsListBox"/>
                                
                                <StackPanel Grid.Row="2" Orientation="Horizontal">
                                    <TextBox Name="NewFileExtensionTextBox" Width="100"/>
                                    <Button Name="AddFileExtensionButton" Content="Add" Click="AddFileExtension_Click"/>
                                    <Button Name="RemoveFileExtensionButton" Content="Remove Selected" Click="RemoveFileExtension_Click"/>
                                </StackPanel>
                            </Grid>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Logging Tab -->
            <TabItem Header="Logging">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <GroupBox Header="Logging Options">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Minimum Log Level:" VerticalAlignment="Center"/>
                                <ComboBox Grid.Row="0" Grid.Column="1" Name="MinimumLogLevelComboBox"/>
                                
                                <CheckBox Grid.Row="1" Grid.Column="1" Name="EnableFileLoggingCheckBox" Content="Enable file logging"/>
                                <CheckBox Grid.Row="2" Grid.Column="1" Name="EnableUsageTrackingCheckBox" Content="Enable usage tracking"/>
                                <CheckBox Grid.Row="3" Grid.Column="1" Name="VerboseModeCheckBox" Content="Verbose mode (detailed logging)"/>
                                
                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Max Log Entries:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="4" Grid.Column="1" Name="MaxLogEntriesTextBox"/>
                                
                                <TextBlock Grid.Row="5" Grid.Column="0" Text="Log Retention (days):" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="5" Grid.Column="1" Name="LogRetentionDaysTextBox"/>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="Log Management">
                            <StackPanel Orientation="Horizontal">
                                <Button Name="ViewLogsButton" Content="View Logs" Click="ViewLogs_Click"/>
                                <Button Name="ExportLogsButton" Content="Export Logs" Click="ExportLogs_Click"/>
                                <Button Name="ClearLogsButton" Content="Clear Logs" Click="ClearLogs_Click"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- UI Settings Tab -->
            <TabItem Header="User Interface">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <GroupBox Header="Interface Options">
                            <StackPanel>
                                <CheckBox Name="RememberWindowPositionsCheckBox" Content="Remember window positions"/>
                                <CheckBox Name="ShowDetailedProgressCheckBox" Content="Show detailed progress information"/>
                                <CheckBox Name="ShowTooltipsCheckBox" Content="Show tooltips"/>
                                
                                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                    <TextBlock Text="Theme:" VerticalAlignment="Center" Width="100"/>
                                    <ComboBox Name="ThemeComboBox" Width="150"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Settings Management">
                            <StackPanel Orientation="Horizontal">
                                <Button Name="ExportSettingsButton" Content="Export Settings" Click="ExportSettings_Click"/>
                                <Button Name="ImportSettingsButton" Content="Import Settings" Click="ImportSettings_Click"/>
                                <Button Name="ResetToDefaultsButton" Content="Reset to Defaults" Click="ResetToDefaults_Click"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Dialog Buttons -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="10">
            <Button Name="OkButton" Content="OK" IsDefault="True" Click="Ok_Click"/>
            <Button Name="CancelButton" Content="Cancel" IsCancel="True" Click="Cancel_Click"/>
            <Button Name="ApplyButton" Content="Apply" Click="Apply_Click"/>
        </StackPanel>
    </Grid>
</Window>